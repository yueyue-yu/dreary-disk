# 发布与自定义配置指南

## 前置条件
- 使用 Node 22（见 `.nvmrc`）与 `pnpm`。
- 安装依赖：`pnpm install`
- 本地开发：`pnpm dev`（默认 http://localhost:3000）

## 发布文章/笔记
- 文章：在 `src/content/post/` 新建 `.md`/`.mdx`；笔记：`src/content/note/`。
- 文章 Frontmatter 示例：
  ```md
  ---
  title: "标题"
  description: "摘要"
  publishDate: "2025-09-12"
  tags: ["astro", "blog"]
  draft: false
  coverImage: { src: "./cover.png", alt: "封面图说明" } # 可选
  ogImage: "/path/to/image.png" # 可选；不填则自动生成 OG 图
  ---
  ```
- 笔记 Frontmatter（ISO 8601 带时区）：
  ```md
  ---
  title: "便签"
  publishDate: "2025-09-12T08:00:00+08:00"
  description: "可选"
  ---
  ```
- 标签页：在 `src/content/tag/` 创建标签文件（可选 `title`/`description`）。
- 草稿：`draft: true` 会从生产构建中排除。
- 提示块（Admonitions）示例：
  ```md
  :::tip 小贴士
  内容
  :::
  ```

## 构建与预览（含搜索）
- 开发预览：`pnpm dev`
- 生产构建：`pnpm build && pnpm postbuild`（Pagefind 搜索仅在 postbuild 后可用）
- 预览打包结果：`pnpm preview`

## 自定义配置
- 站点信息：编辑 `src/site.config.ts`
  - 必改：`url`（你的域名）、`title`、`description`、`author`
  - 语言/日期：`lang`、`ogLocale`、`date.locale/options`
  - 导航：`menuLinks`（Header/Footer 菜单）
  - 代码高亮：`expressiveCodeOptions`（当前 `dracula`/`github-light`）
- 资产与 SEO：
  - 图标：将你想要的站点图标保存为 `public/icon.png`（建议正方形 PNG），已在配置中作为 WebManifest 源；构建时会自动生成所需图标。
  - OG 图：`public/social-card.png` 为默认 OG 图
  - 如需统计脚本，在 `src/components/BaseHead.astro` 添加
- 样式与 UI：
  - 全局样式：`src/styles/global.css`；Tailwind：`tailwind.config.ts`
  - 社交链接：`src/components/SocialList.astro`
- 环境变量（Webmentions）：复制 `.example.env` 为 `.env`，设置 `WEBMENTION_*`；勿提交 `.env`

## 内容与命名建议
- 文件名用 kebab-case；组件用 PascalCase（如 `Header.astro`）；工具函数用 camelCase。
- `tags` 自动去重并转小写；MD/MDX 保持每行 ~80 字符便于审阅。
- 不要编辑生成目录：`node_modules/`、`dist/`、`.astro/`。
