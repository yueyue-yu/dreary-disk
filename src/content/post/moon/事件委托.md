---
title: "事件委托"
description: "解释事件委托的原理与优势，结合列表点击的示例展示如何统一绑定父元素以兼容动态子项，并区分 target 与 currentTarget 及常见注意事项。"
publishDate: "2025-09-12"
tags: ["JavaScript", "事件委托", "事件冒泡", "DOM"]
draft: false
---
## 🧠 什么是事件委托？

> 事件委托是指将事件监听器绑定在父元素，而不是每个子元素上。利用事件冒泡，当子元素触发事件时，事件会冒泡到父元素，从而在父元素的监听器中统一处理。
---
### ✅ 为什么使用事件委托？
1. **性能更好**：不用给每个子元素都绑定监听器。
2. **动态元素可用**：适用于后续动态添加的子元素。
3. **代码更简洁**：统一处理逻辑，易于维护。
---
### 📌 经典例子：点击列表项
### HTML 结构：
```HTML
<ul id="list">
  <li>苹果</li>
  <li>香蕉</li>
  <li>橘子</li>
</ul>
```
### ❌ 常见错误写法：为每个 `<li>` 添加监听器
```Plain
const items = document.querySelectorAll("\#list li");
items.forEach(item => {
  item.addEventListener("click", () => {
    console.log("你点击了：" + item.textContent);
  });
});
```
这种方式对于**静态元素有效**，但**新添加的元素不会生效**。
---
### ✅ 正确写法：事件委托
```JavaScript
document.getElementById("list").addEventListener("click", function (event) {
  // 检查事件来源是否是 <li> 元素
  if (event.target.tagName.toLowerCase() === "li") {
    console.log("你点击了：" + event.target.textContent);
  }
});
```
---
### 🪄 支持动态添加元素
```JavaScript
const list = document.getElementById("list");
// 动态添加一项
const newItem = document.createElement("li");
newItem.textContent = "西瓜";
list.appendChild(newItem); // 点击它也能触发事件
```
事件绑定不需要变，**新添加的元素自动生效！**
---
### 🎯 常见用途
- 点击删除按钮（如待办事项）
- 表格操作（编辑、删除）
- 下拉菜单选项选择
- 图片懒加载、无限滚动
---
### ⚠️ 注意事项
- 一定要做 `event.target` 的判断，避免误触父元素。
- 有些事件（如 `focus`、`blur`）**不会冒泡**，不能用事件委托。
- 复杂结构中建议用 `closest()` 精准匹配：
```JavaScript
const target = event.target.closest("li");
if (target && list.contains(target)) {
  console.log("你点击了：" + target.textContent);
}
```
---
## 🔍 关键属性区别
|属性名|含义|
|---|---|
|`event.target`|**实际点击的元素**（事件最初触发的目标）|
|`event.currentTarget`|当前正在处理事件的元素（你绑定监听器的那个元素）|
---
