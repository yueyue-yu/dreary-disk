/* would like to ignore ./src/pages/og-image/[slug].png.ts */
@import "tailwindcss";
/* config for tailwindcss-typography plugin */
@config "../../tailwind.config.ts";

/* Font stacks (open-source alternatives to Claude official stack) */
:root {
  --font-fallback-sans: "Kumbh Sans", system-ui, "Segoe UI", Roboto, Helvetica, Arial, "Noto Serif SC", "Noto Sans CJK SC", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  --font-fallback-serif: "Source Han Serif SC", "Noto Serif SC", "Songti SC", Georgia, "Times New Roman", Times, serif;
  --font-fallback-monospace: ui-monospace, Menlo, Monaco, Consolas, "Noto Sans Mono CJK SC", monospace;

  /* Open-source mapping */
  --font-styrene-b: "Kumbh Sans", "Noto Serif SC";              /* UI sans replacement */
  --font-tiempos: "Source Serif 4";       /* Claude response serif replacement */
  --font-jetbrains: "JetBrains Mono";     /* code mono */

  /* Public tokens */
  --font-ui: var(--font-styrene-b), var(--font-fallback-sans);
  --font-claude-response: var(--font-tiempos), var(--font-fallback-serif);
  --font-mono: var(--font-jetbrains), var(--font-fallback-monospace);
}

/* use a selector-based strategy for dark mode */
@variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

/* you could refactor below to use light-dark(), depending on your target audience */
@theme {
  /* Claude official palette mapping (light mode) */
  --color-global-bg: hsl(48 33.3% 97.1%);    /* bg-100 - warm off-white background */
  --color-global-text: hsl(60 2.6% 7.6%);    /* text-000 */
  --color-link: hsl(210 70.9% 51.6%);        /* accent-secondary-100 */
  --color-accent: hsl(210 70.9% 51.6%);      /* accent-secondary-100 */
  --color-accent-2: hsl(60 2.6% 7.6%);       /* headings use primary text */
  --color-quote: hsl(15 63.1% 59.6%);        /* accent-brand */
}

@layer base {
	html {
		color-scheme: light dark;
		accent-color: var(--color-accent);
		scrollbar-gutter: stable;

		&[data-theme="light"] {
			color-scheme: light;
		}

		&[data-theme="dark"] {
			color-scheme: dark;
			/* Claude official palette mapping (dark mode) */
			--color-global-bg: hsl(60 2.1% 18.4%);   /* bg-000 */
			--color-global-text: hsl(48 33.3% 97.1%); /* text-000 */
			--color-link: hsl(210 71.1% 62%);        /* accent-secondary-000 */
			--color-accent: hsl(210 71.1% 62%);      /* accent-secondary-000 */
			--color-accent-2: hsl(48 33.3% 97.1%);
			--color-quote: hsl(15 63.1% 59.6%);      /* accent-brand */
		}
	}

	:target {
		scroll-margin-block: 5ex;
	}

	@view-transition {
		navigation: auto;
	}

	/* Astro image responsive styles, modified from -> https://docs.astro.build/en/guides/images/#responsive-image-styles */
	:where([data-astro-image]) {
		object-fit: var(--fit);
		object-position: var(--pos);
	}
	[data-astro-image="full-width"] {
		width: 100%;
	}
	[data-astro-image="constrained"] {
		max-width: 100%;
	}
}

@layer components {
	@import "./components/admonition.css";
	@import "./components/github-card.css";

	.cactus-link {
		@apply hover:decoration-link underline underline-offset-2 hover:decoration-2;
	}

	.title {
		@apply text-accent-2 text-3xl font-semibold;
	}

	/* Claude response serif region (articles, poems, etc.) */
	.claude-response {
		font-family: var(--font-claude-response);
	}

	/* Ensure code uses mono stack consistently */
	.prose code,
	.prose kbd,
	.prose samp,
	.expressive-code {
		font-family: var(--font-mono);
	}
}

@utility prose {
	--tw-prose-body: var(--color-global-text);
	--tw-prose-bold: var(--color-global-text);
	--tw-prose-bullets: var(--color-global-text);
	--tw-prose-code: var(--color-global-text);
	--tw-prose-headings: var(--color-accent-2);
	--tw-prose-hr: 0.5px dashed #666;
	--tw-prose-links: var(--color-global-text);
	--tw-prose-quotes: var(--color-quote);
	--tw-prose-th-borders: #666;
}
